<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Suomalaiset merikartat</title>
    <link rel="stylesheet" href="http://openlayers.org/en/v3.15.1/css/ol.css" type="text/css">
    <link rel="stylesheet" href="style.css" type="text/css">
    <script src="http://openlayers.org/en/v3.15.1/build/ol.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ol3/3.15.1/ol.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/proj4js/2.3.6/proj4.js"></script>
  </head>
  <body>
    
    <div id="license" class="warning">Tämän sivun kartat ovat <a href="http://www.liikennevirasto.fi/avoindata/kayttoehdot/merikartoitusaineiston-lisenssi">Liikenneviraston merikartoitusaineiston lisenssin</a> alaisia. Karttoja ei ole tarkoitettu navigointitarkoituksiin. Karttojen ajantasaisuutta ei taata, ja kartoista saattaa puuttua elementtejä tai ne saattavat olla piirtyneinä virheellisesti. <a href="javascript:" onClick="document.getElementById('license').innerHTML='';">[OK – sulje]</a></div>
    
    <div id="map" class="map"></div>

    <div id="selite" class="textbox">
    </div>

    <script>

      var lvAttributionText = '&copy; Liikennevirasto. Aineistolisenssi Liikenneviraston <a href="http://www.liikennevirasto.fi/avoindata/kayttoehdot/merikartoitusaineiston-lisenssi">sivuilla</a>.';
      // EPSG 3067 definition, ETRS-TM35FIN
      proj4.defs("EPSG:3067","+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs");

      var projection = new ol.proj.Projection({
        code: 'EPSG:3067',
        extent: [50199.4814, 6582464.0358, 761274.6247, 7799839.8902]
      });

      var extent = [150000,6650000,720000,6885000]

      var layers = [
        new ol.layer.Tile({
          extent: extent,
          projection: projection,
          source: new ol.source.TileWMS({
            url: 'http://meri.kaislaniemi.net:8080/service',
            crossOrigin: 'anonymous',
            attributions: lvAttributionText,
            params: {
              'LAYERS': 'merikartta_s025',
              'FORMAT': 'image/png'
            },
            serverType: 'geoserver',
            //serverType: /** @type {ol.source.wms.ServerType} */ ('mapserver')
          }),
          minResolution: 5,
          maxResolution: 15,
        }),
        new ol.layer.Tile({
          extent: extent,
          projection: projection,
          source: new ol.source.TileWMS({
            url: 'http://meri.kaislaniemi.net:8080/service',
            crossOrigin: 'anonymous',
            attributions: lvAttributionText,
            params: {
              'LAYERS': 'merikartta_s050',
              'FORMAT': 'image/png'
            },
            serverType: 'geoserver',
            //serverType: /** @type {ol.source.wms.ServerType} */ ('mapserver')
          }),
          minResolution: 15,
          maxResolution: 25,
        }),
        new ol.layer.Tile({
          extent: extent,
          projection: projection,
          source: new ol.source.TileWMS({
            url: 'http://meri.kaislaniemi.net:8080/service',
            crossOrigin: 'anonymous',
            attributions: lvAttributionText,
            params: {
              'LAYERS': 'merikartta_s100',
              'FORMAT': 'image/png'
            },
            serverType: 'geoserver',
            //serverType: /** @type {ol.source.wms.ServerType} */ ('mapserver')
          }),
          minResolution: 35,
          maxResolution: 45,
        })
        
      ];

      var map = new ol.Map({
        //controls: ol.control.defaults().extend([
        //  new ol.control.ScaleLine()
        //]),
        layers: layers,
        target: 'map',
        view: new ol.View({
          projection: projection,
          center: [396403,6672892],
          extent: extent,
          resolutions: [40, 20, 10],
          zoom: 7,
          maxZoom: 9,
          minZoom: 7
        })
      });
      //alert(map.getView().getResolution());
    </script>
  </body>
</html>
